(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931,880],{95411:function(e,t,s){Promise.resolve().then(s.bind(s,14053))},14053:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eD}});var a=s(57437),r=s(2265),n=s(92371),i=s(10880),l=s(93448),c=s(97620),o=s(60429),d=s(5095),m=s(25466),x=s(71621),u=s(58896),h=s(46221),g=s(98728),p=s(10407),v=s(22568),f=s(73247),y=s(99397),b=s(92369),j=s(82023);let N=[{id:"dashboard",label:"Tableau de bord",icon:m.Z,color:"from-blue-500 to-cyan-500"},{id:"transactions",label:"Transactions",icon:x.Z,color:"from-green-500 to-emerald-500"},{id:"goals",label:"Objectifs",icon:u.Z,color:"from-purple-500 to-pink-500"},{id:"analytics",label:"Analyses",icon:h.Z,color:"from-orange-500 to-red-500"},{id:"settings",label:"Param\xe8tres",icon:g.Z,color:"from-gray-500 to-slate-600"}];function w(){let{currentView:e,setCurrentView:t}=(0,n.useFinanceStore)(),{theme:s}=(0,c.Fg)(),[i,l]=(0,r.useState)(!0),[m,x]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=()=>{h(window.innerWidth<768),window.innerWidth<768&&l(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let g={hidden:{opacity:0},visible:e=>({opacity:1,transition:{delay:.05*e,duration:.2}})};return(0,a.jsxs)(o.E.div,{variants:{expanded:{width:280},collapsed:{width:80}},initial:"expanded",animate:i?"expanded":"collapsed",className:"relative h-screen overflow-hidden ".concat(u&&i?"fixed inset-0 z-50 md:relative md:z-auto":""),style:{background:"var(--bg-primary)",borderRight:"1px solid var(--border-primary)"},children:[(0,a.jsx)("div",{className:"absolute inset-0",children:(0,a.jsx)("div",{className:"absolute inset-0 opacity-5",style:{background:"var(--gradient-primary)"}})}),(0,a.jsxs)("div",{className:"relative z-10 flex flex-col h-full",children:[(0,a.jsxs)(o.E.div,{variants:g,custom:0,className:"p-6",style:{borderBottom:"1px solid var(--border-primary)"},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[u&&i&&(0,a.jsx)("button",{onClick:()=>l(!1),className:"p-2 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-financial-500","aria-label":"Fermer le menu",children:(0,a.jsx)(p.Z,{className:"h-5 w-5 rotate-180"})}),(0,a.jsxs)(o.E.div,{whileHover:{scale:1.05},className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-financial-500 to-blue-500 rounded-full blur-lg opacity-75"}),(0,a.jsx)("div",{className:"relative p-3 rounded-full",style:{background:"var(--bg-secondary)",border:"1px solid var(--border-primary)"},children:(0,a.jsx)(v.Z,{className:"h-8 w-8 text-financial-400"})})]}),(0,a.jsx)(d.M,{children:i&&(0,a.jsxs)(o.E.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},className:"overflow-hidden",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:"Finance"}),(0,a.jsx)("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"Gestionnaire Financier"})]})})]}),(0,a.jsx)(o.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>l(!i),className:"p-2 transition-colors rounded-lg focus:outline-none focus:ring-2 focus:ring-financial-500 focus:ring-offset-2",style:{color:"var(--text-secondary)"},"aria-label":i?"R\xe9duire le menu":"\xc9tendre le menu","aria-expanded":i,children:(0,a.jsx)(p.Z,{className:"h-5 w-5 transition-transform duration-300 ".concat(i?"rotate-180":"")})})]}),(0,a.jsx)(d.M,{children:i&&(0,a.jsxs)(o.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"relative",children:[(0,a.jsx)(f.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4",style:{color:"var(--text-tertiary)"}}),(0,a.jsx)("input",{type:"text",placeholder:"Rechercher...",className:"w-full pl-10 pr-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-financial-500 focus:border-transparent backdrop-blur-sm",style:{background:"var(--bg-glass)",border:"1px solid var(--border-primary)",color:"var(--text-primary)"}})]})})]}),(0,a.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:N.map((s,r)=>{let n=s.icon,l=e===s.id;return(0,a.jsxs)(o.E.button,{variants:g,custom:r+1,onClick:()=>t(s.id),className:"relative w-full flex items-center p-3 rounded-xl transition-all duration-200 group",style:{background:l?"var(--bg-glass)":"transparent",color:l?"var(--text-primary)":"var(--text-secondary)",border:l?"1px solid var(--border-primary)":"none"},children:[l&&(0,a.jsx)(o.E.div,{layoutId:"activeIndicator",className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-financial-500 to-blue-500 rounded-l-xl"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(n,{className:"h-6 w-6"})}),(0,a.jsx)(d.M,{children:i&&(0,a.jsx)(o.E.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},className:"ml-4 text-sm font-medium overflow-hidden",children:s.label})}),l&&i&&(0,a.jsx)(o.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"ml-auto",children:(0,a.jsx)(p.Z,{className:"h-4 w-4"})})]},s.id)})}),(0,a.jsxs)("div",{className:"p-4 border-t border-white/10",children:[(0,a.jsx)("div",{className:"space-y-2 mb-4",children:(0,a.jsxs)(o.E.button,{variants:g,custom:N.length+1,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full flex items-center justify-center p-3 bg-gradient-to-r from-financial-500 to-blue-500 text-white rounded-xl hover:shadow-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-financial-500 focus:ring-offset-2","aria-label":"Ajouter une nouvelle op\xe9ration",children:[(0,a.jsx)(y.Z,{className:"h-5 w-5"}),(0,a.jsx)(d.M,{children:i&&(0,a.jsx)(o.E.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},className:"ml-2 text-sm font-medium overflow-hidden",children:"Ajouter une op\xe9ration"})})]})}),(0,a.jsxs)(o.E.div,{variants:g,custom:N.length+2,className:"flex items-center space-x-3 p-3 bg-white/5 rounded-xl backdrop-blur-sm",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-financial-500 to-blue-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(b.Z,{className:"h-5 w-5 text-white"})}),(0,a.jsx)("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-slate-800"})]}),(0,a.jsx)(d.M,{children:i&&(0,a.jsxs)(o.E.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},className:"overflow-hidden",children:[(0,a.jsx)("div",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"Utilisateur"}),(0,a.jsx)("div",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"En ligne"})]})})]}),(0,a.jsx)(o.E.div,{variants:g,custom:N.length+3,className:"mt-4 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-1 text-xs",style:{color:"var(--text-tertiary)"},children:[(0,a.jsx)(j.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"100% local & priv\xe9"})]})})]})]}),(0,a.jsx)(o.E.button,{whileHover:{scale:1.05},className:"fixed bottom-6 left-6 p-4 bg-gradient-to-r from-financial-500 to-blue-500 text-white rounded-full shadow-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-financial-500 focus:ring-offset-2",onClick:()=>t("transactions"),"aria-label":"Acc\xe9der aux transactions",children:(0,a.jsx)(y.Z,{className:"h-6 w-6"})})]})}var k=s(91723),D=s(31047),C=s(94766),E=s(92735),S=s(17689),A=s(29202),Z=s(11239);function F(){let{selectedDateRange:e,setDateRange:t}=(0,n.useFinanceStore)(),{theme:i}=(0,c.Fg)(),[m,x]=(0,r.useState)(!1),[u,h]=(0,r.useState)(new Date),[g,v]=(0,r.useState)(!1),[y,j]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=setInterval(()=>{h(new Date)},1e3);return()=>clearInterval(e)},[]);let N=e=>{let s,a;let r=new Date;switch(e){case"current":s=new Date(r.getFullYear(),r.getMonth(),1),a=new Date(r.getFullYear(),r.getMonth()+1,0);break;case"previous":s=new Date(r.getFullYear(),r.getMonth()-1,1),a=new Date(r.getFullYear(),r.getMonth(),0);break;case"next":s=new Date(r.getFullYear(),r.getMonth()+1,1),a=new Date(r.getFullYear(),r.getMonth()+2,0)}t(s,a),x(!1)},w=async()=>{let{exportData:e}=await Promise.resolve().then(s.bind(s,10880)),t=JSON.stringify(await e(),null,2),{downloadFile:a}=await Promise.resolve().then(s.bind(s,93448));a(t,"finance-backup-".concat((0,l.iS)(new Date),".json"),"application/json")},F={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.2}}};return(0,a.jsxs)(o.E.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3,staggerChildren:.05}}},initial:"hidden",animate:"visible",className:"relative overflow-hidden",style:{background:"var(--bg-secondary)",borderBottom:"1px solid var(--border-primary)"},children:[(0,a.jsx)("div",{className:"absolute inset-0",children:(0,a.jsx)("div",{className:"absolute inset-0 opacity-3",style:{background:"var(--gradient-primary)"}})}),(0,a.jsxs)("div",{className:"relative z-10 px-6 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(o.E.div,{variants:F,className:"flex items-center space-x-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg",style:{background:"var(--bg-glass)",border:"1px solid var(--border-primary)"},children:(0,a.jsx)(k.Z,{className:"h-4 w-4",style:{color:"var(--text-accent)"}})}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("div",{className:"font-medium",style:{color:"var(--text-primary)"},children:u.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}),(0,a.jsx)("div",{className:"text-xs",style:{color:"var(--text-secondary)"},children:u.toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"})})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>x(!m),className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-all duration-200",style:{background:"var(--bg-glass)",border:"1px solid var(--border-primary)",color:"var(--text-primary)"},children:[(0,a.jsx)(D.Z,{className:"h-4 w-4",style:{color:"var(--text-accent)"}}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:[(0,l.iS)(e.start)," -"," ",(0,l.iS)(e.end)]}),(0,a.jsx)(p.Z,{className:"h-4 w-4",style:{transform:m?"rotate(90deg)":"none",transition:"transform 0.2s"}})]}),(0,a.jsx)(d.M,{children:m&&(0,a.jsx)(o.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 mt-2 w-64 rounded-xl shadow-xl p-4 z-50",style:{background:"var(--bg-secondary)",border:"1px solid var(--border-primary)"},children:(0,a.jsx)("div",{className:"space-y-2",children:[{key:"previous",name:"Mois pr\xe9c\xe9dent"},{key:"current",name:"Mois en cours"},{key:"next",name:"Mois suivant"}].map(e=>(0,a.jsx)("button",{onClick:()=>N(e.key),className:"w-full text-left px-3 py-2 rounded-lg transition-colors",style:{color:"var(--text-primary)"},onMouseEnter:e=>e.currentTarget.style.background="var(--bg-glass)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:e.name},e.key))})})})]})]}),(0,a.jsxs)(o.E.div,{variants:F,className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 z-10",style:{color:"var(--text-tertiary)"}}),(0,a.jsx)("input",{type:"text",placeholder:"Rechercher...",value:y,onChange:e=>j(e.target.value),className:"pl-10 pr-4 py-2 w-full max-w-xs md:max-w-sm lg:w-64 rounded-lg focus:outline-none focus:ring-2 transition-all duration-200",style:{background:"var(--bg-glass)",border:"1px solid var(--border-primary)",color:"var(--text-primary)"}})]})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>v(!g),className:"p-2 rounded-lg transition-all duration-200 relative",style:{background:"var(--bg-glass)",border:"1px solid var(--border-primary)",color:"var(--text-primary)"},children:[(0,a.jsx)(C.Z,{className:"h-5 w-5"}),(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full",style:{background:"var(--color-info)"}})]}),(0,a.jsx)(d.M,{children:g&&(0,a.jsxs)(o.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full right-0 mt-2 w-80 rounded-xl shadow-xl p-4 z-50",style:{background:"var(--bg-secondary)",border:"1px solid var(--border-primary)"},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h4",{className:"font-medium",style:{color:"var(--text-primary)"},children:"Notifications"}),(0,a.jsx)("button",{onClick:()=>v(!1),className:"transition-colors",style:{color:"var(--text-secondary)"},onMouseEnter:e=>e.currentTarget.style.color="var(--text-primary)",onMouseLeave:e=>e.currentTarget.style.color="var(--text-secondary)",children:(0,a.jsx)("span",{className:"text-xs",children:"✕"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"p-3 rounded-lg",style:{background:"var(--color-success)20",border:"1px solid var(--color-success)30"},children:[(0,a.jsx)("div",{className:"text-sm font-medium",style:{color:"var(--color-success)"},children:"Objectif atteint!"}),(0,a.jsx)("div",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"Vous avez atteint 75% de votre objectif vacances"})]}),(0,a.jsxs)("div",{className:"p-3 rounded-lg",style:{background:"var(--color-warning)20",border:"1px solid var(--color-warning)30"},children:[(0,a.jsx)("div",{className:"text-sm font-medium",style:{color:"var(--color-warning)"},children:"Alerte budget"}),(0,a.jsx)("div",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"Vos d\xe9penses restaurants d\xe9passent la moyenne"})]})]})]})})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:w,className:"p-2 rounded-lg transition-all duration-200",style:{background:"var(--bg-glass)",border:"1px solid var(--border-primary)",color:"var(--text-primary)"},title:"Exporter les donn\xe9es",children:(0,a.jsx)(E.Z,{className:"h-5 w-5"})}),(0,a.jsx)("button",{className:"p-2 rounded-lg transition-all duration-200",style:{background:"var(--bg-glass)",border:"1px solid var(--border-primary)",color:"var(--text-primary)"},title:"Importer des donn\xe9es",children:(0,a.jsx)(S.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded-lg",style:{background:"var(--bg-glass)",border:"1px solid var(--border-primary)"},children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-financial-500 to-blue-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(b.Z,{className:"h-4 w-4 text-white"})}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("div",{className:"font-medium",style:{color:"var(--text-primary)"},children:"Utilisateur"}),(0,a.jsx)("div",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"Premium"})]})]})]})]}),(0,a.jsx)(o.E.div,{variants:F,className:"px-6 py-2",style:{background:"var(--bg-tertiary)",borderTop:"1px solid var(--border-primary)"},children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",style:{color:"var(--text-tertiary)"},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(A.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Donn\xe9es stock\xe9es localement"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(Z.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Interface optimis\xe9e"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{background:"var(--color-success)"}}),(0,a.jsx)("span",{children:"Connect\xe9"})]})]})})]})]})}var T=s(70525),M=s(21047),L=s(3085),P=s(88997),R=s(94394);function z(){let{getFinancialPulse:e}=(0,n.useFinanceStore)(),{theme:t}=(0,c.Fg)(),s=(0,l.nB)(),i=e(),[d,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=setInterval(()=>{m(e=>!e)},3e3);return()=>clearInterval(e)},[]);let x=()=>{switch(i.status){case"healthy":return(0,a.jsx)(T.Z,{className:"h-8 w-8 text-success"});case"warning":return(0,a.jsx)(M.Z,{className:"h-8 w-8 text-warning"});case"danger":return(0,a.jsx)(L.Z,{className:"h-8 w-8 text-danger"})}},u=2*Math.PI*45,h=u-i.score/100*u,g={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.2}}};return(0,a.jsxs)(o.E.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3,staggerChildren:.1}}},initial:"hidden",animate:"visible",className:"relative glass-card overflow-hidden",children:[(0,a.jsxs)(o.E.div,{variants:g,className:"relative z-10 flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("div",{className:"p-3 rounded-full",style:{background:"var(--bg-secondary)"},children:(0,a.jsx)(P.Z,{className:"h-6 w-6",style:{color:"var(--text-accent)"}})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:"Pouls Financier"}),(0,a.jsx)("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Votre sant\xe9 financi\xe8re en temps r\xe9el"})]})]}),(0,a.jsx)("div",{className:"px-4 py-2 rounded-full text-sm font-medium",style:{background:"healthy"===i.status?"rgba(16, 185, 129, 0.1)":"warning"===i.status?"rgba(245, 158, 11, 0.1)":"rgba(239, 68, 68, 0.1)",color:"healthy"===i.status?"var(--color-success)":"warning"===i.status?"var(--color-warning)":"var(--color-danger)",border:"1px solid ".concat("healthy"===i.status?"var(--color-success)":"warning"===i.status?"var(--color-warning)":"var(--color-danger)")},children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[x(),(0,a.jsx)("span",{children:"healthy"===i.status?"Excellent":"warning"===i.status?"Attention":"Alerte"})]})})]}),(0,a.jsxs)("div",{className:"relative z-10 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)(o.E.div,{variants:g,className:"flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("svg",{className:"w-40 h-40 transform -rotate-90",viewBox:"0 0 100 100",children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"pulseGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#3b82f6"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#8b5cf6"})]})}),(0,a.jsx)("circle",{cx:"50",cy:"50",r:"45",stroke:"rgba(59, 130, 246, 0.2)",strokeWidth:"8",fill:"none"}),(0,a.jsx)("circle",{cx:"50",cy:"50",r:"45",stroke:"url(#pulseGradient)",strokeWidth:"8",fill:"none",strokeLinecap:"round",strokeDasharray:u,strokeDashoffset:h,style:{transition:"stroke-dashoffset 1s ease-out"}})]}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold mb-1",style:{color:"var(--text-primary)"},children:Math.round(i.score)}),(0,a.jsx)("div",{className:"text-sm",style:{color:"var(--text-tertiary)"},children:"/100"})]})})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center space-x-2",children:[x(),(0,a.jsx)("span",{className:"font-medium",style:{color:"healthy"===i.status?"var(--color-success)":"warning"===i.status?"var(--color-warning)":"var(--color-danger)"},children:"healthy"===i.status?"Excellent":"warning"===i.status?"Prudent":"Alerte"})]})]}),(0,a.jsxs)(o.E.div,{variants:g,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"glass-card p-4 transition-all duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Revenus du mois"}),(0,a.jsx)(T.Z,{className:"h-4 w-4",style:{color:"var(--color-success)"}})]}),(0,a.jsx)("div",{className:"text-2xl font-bold",style:{color:"var(--color-success)"},children:s(i.monthlyIncome)}),(0,a.jsx)("div",{className:"mt-2 h-2 rounded-full overflow-hidden",style:{background:"var(--bg-tertiary)"},children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-success to-emerald-500 rounded-full",style:{width:"".concat(Math.min(i.monthlyIncome/1e4*100,100),"%"),transition:"width 1s ease-out"}})})]}),(0,a.jsxs)("div",{className:"glass-card p-4 transition-all duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"D\xe9penses du mois"}),(0,a.jsx)(L.Z,{className:"h-4 w-4",style:{color:"var(--color-danger)"}})]}),(0,a.jsx)("div",{className:"text-2xl font-bold",style:{color:"var(--color-danger)"},children:s(i.monthlyExpenses)}),(0,a.jsx)("div",{className:"mt-2 h-2 rounded-full overflow-hidden",style:{background:"var(--bg-tertiary)"},children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-danger to-red-500 rounded-full",style:{width:"".concat(Math.min(i.monthlyExpenses/1e4*100,100),"%"),transition:"width 1s ease-out"}})})]})]}),(0,a.jsxs)(o.E.div,{variants:g,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"glass-card p-4 transition-all duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Budget restant"}),(0,a.jsx)(Z.Z,{className:"h-4 w-4",style:{color:"var(--text-accent)"}})]}),(0,a.jsx)("div",{className:"text-2xl font-bold",style:{color:i.remainingBudget>=0?"var(--color-success)":"var(--color-danger)"},children:s(i.remainingBudget)}),(0,a.jsx)("div",{className:"mt-2 text-xs",style:{color:"var(--text-tertiary)"},children:i.remainingBudget>=0?"Exc\xe9dent":"D\xe9ficit"})]}),(0,a.jsxs)("div",{className:"glass-card p-4 transition-all duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Jours restants"}),(0,a.jsx)(R.Z,{className:"h-4 w-4",style:{color:"var(--text-tertiary)"}})]}),(0,a.jsx)("div",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:i.daysUntilNextIncome}),(0,a.jsx)("div",{className:"mt-2 text-xs",style:{color:"var(--text-tertiary)"},children:"jours"})]})]})]}),(0,a.jsx)(o.E.div,{variants:g,className:"relative z-10 mt-8 pt-6",style:{borderTop:"1px solid var(--border-primary)"},children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[i.remainingBudget>0&&(0,a.jsxs)("button",{className:"px-6 py-3 bg-gradient-to-r from-success to-emerald-500 text-white rounded-xl transition-all duration-200 shadow-lg font-medium",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 inline mr-2"}),"\xc9pargner ",s(.2*i.remainingBudget)]}),(0,a.jsx)("button",{className:"px-6 py-3 bg-gradient-to-r from-financial-500 to-blue-600 text-white rounded-xl transition-all duration-200 shadow-lg font-medium",children:"Voir le d\xe9tail"})]})})]})}var I=s(47625),B=s(75169),O=s(3574),q=s(20407),G=s(8147),V=s(21156),U=s(56940),J=s(97059),W=s(62994),K=s(54061),H=s(95252);let Y=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#f97316","#6b7280"];function _(){let{getMonthlyStats:e,getCategoryStats:t}=(0,n.useFinanceStore)(),s=(0,l.nB)(),i=e(),c=t(),[d,m]=(0,r.useState)("overview"),[x,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{h(!0)},[]);let g={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.2}}},p=c.slice(0,6).map((e,t)=>({category:e.category,amount:e.amount,color:Y[t%Y.length],percentage:e.percentage})),v=[{month:"Jan",income:2500,expenses:1800},{month:"F\xe9v",income:2650,expenses:1950},{month:"Mar",income:i.income,expenses:i.expenses}],f=e=>{let{title:t,value:s,icon:r,color:n,trend:i,delay:l=0}=e;return(0,a.jsxs)("div",{className:"glass-card transition-all duration-200 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(n," opacity-5")}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg",style:{background:"var(--bg-glass)"},children:(0,a.jsx)(r,{className:"h-5 w-5",style:{color:"var(--text-accent)"}})}),i&&(0,a.jsx)("div",{className:"p-1 rounded-full",style:{background:"up"===i?"rgba(16, 185, 129, 0.1)":"down"===i?"rgba(239, 68, 68, 0.1)":"rgba(100, 116, 139, 0.1)",color:"up"===i?"var(--color-success)":"down"===i?"var(--color-danger)":"var(--text-tertiary)"},children:"up"===i?(0,a.jsx)(T.Z,{className:"h-4 w-4"}):"down"===i?(0,a.jsx)(L.Z,{className:"h-4 w-4"}):(0,a.jsx)("div",{className:"w-4 h-4 bg-current rounded-full"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm mb-1",style:{color:"var(--text-secondary)"},children:t}),(0,a.jsx)("div",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:s})]}),(0,a.jsx)("div",{className:"mt-4 h-1 rounded-full overflow-hidden",style:{background:"var(--bg-tertiary)"},children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r ".concat(n," rounded-full"),style:{width:"75%",transition:"width 0.5s ease-out"}})})]})]})},y=e=>{let{title:t,children:s,delay:r=0,className:n=""}=e;return(0,a.jsxs)(o.E.div,{variants:g,initial:"hidden",animate:"visible",transition:{delay:r},className:"glass-card ".concat(n),children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--text-primary)"},children:t}),s]})};return(0,a.jsxs)(o.E.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.1}}},initial:"hidden",animate:"visible",className:"space-y-8",children:[(0,a.jsxs)(o.E.div,{variants:g,className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold",style:{color:"var(--text-primary)"},children:"Vue Mensuelle"}),(0,a.jsx)("p",{className:"mt-1",style:{color:"var(--text-secondary)"},children:"Analyse d\xe9taill\xe9e de vos finances"})]}),(0,a.jsx)("div",{className:"flex space-x-2 p-1 rounded-xl",style:{background:"var(--bg-glass)"},children:[{id:"overview",name:"Aper\xe7u",icon:Z.Z},{id:"categories",name:"Cat\xe9gories",icon:u.Z},{id:"trends",name:"Tendances",icon:T.Z}].map(e=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:()=>m(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-all duration-200",style:{background:d===e.id?"var(--bg-secondary)":"transparent",color:d===e.id?"var(--text-accent)":"var(--text-secondary)",boxShadow:d===e.id?"0 2px 8px rgba(0,0,0,0.1)":"none"},children:[(0,a.jsx)(t,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.name})]},e.id)})})]}),"overview"===d&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(f,{title:"Revenus du mois",value:s(i.income),icon:T.Z,color:"from-success to-emerald-500",trend:"up",delay:.1}),(0,a.jsx)(f,{title:"D\xe9penses du mois",value:s(i.expenses),icon:L.Z,color:"from-danger to-red-500",trend:"down",delay:.2}),(0,a.jsx)(f,{title:"Solde net",value:s(i.balance),icon:H.Z,color:i.balance>=0?"from-success to-emerald-500":"from-danger to-red-500",trend:i.balance>=0?"up":"down",delay:.3})]}),"categories"===d&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(y,{title:"R\xe9partition par Cat\xe9gorie",delay:.1,children:(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(I.h,{width:"100%",height:"100%",children:(0,a.jsxs)(B.u,{children:[(0,a.jsx)(O.b,{data:p,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"amount",label:e=>{let{name:t,percentage:s}=e;return"".concat(t," (").concat(s.toFixed(1),"%)")},children:p.map((e,t)=>(0,a.jsx)(q.b,{fill:e.color},"cell-".concat(t)))}),(0,a.jsx)(G.u,{formatter:e=>s(Number(e))})]})})})}),(0,a.jsx)(y,{title:"Top D\xe9penses",delay:.2,children:(0,a.jsx)("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:p.map((e,t)=>(0,a.jsxs)(o.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.category})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:s(e.amount)}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.percentage.toFixed(1),"%"]})]})]},e.category))})})]}),"trends"===d&&(0,a.jsx)(y,{title:"\xc9volution Mensuelle",delay:.1,className:"h-96",children:(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(I.h,{width:"100%",height:"100%",children:(0,a.jsxs)(V.w,{data:v,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(U.q,{strokeDasharray:"3 3",stroke:"rgba(0,0,0,0.1)"}),(0,a.jsx)(J.K,{dataKey:"month"}),(0,a.jsx)(W.B,{tickFormatter:e=>"".concat(e/1e3,"k")}),(0,a.jsx)(G.u,{formatter:e=>s(Number(e))}),(0,a.jsx)(K.x,{type:"monotone",dataKey:"income",stroke:"#10b981",strokeWidth:3,dot:{fill:"#10b981",strokeWidth:2,r:6},activeDot:{r:8,stroke:"#10b981",strokeWidth:2}}),(0,a.jsx)(K.x,{type:"monotone",dataKey:"expenses",stroke:"#ef4444",strokeWidth:3,dot:{fill:"#ef4444",strokeWidth:2,r:6},activeDot:{r:8,stroke:"#ef4444",strokeWidth:2}})]})})})}),(0,a.jsxs)(o.E.div,{variants:g,className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"glass-card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-financial-100 rounded-lg",children:(0,a.jsx)(D.Z,{className:"h-5 w-5 text-financial-600"})}),(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:"P\xe9riode Actuelle"})]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Donn\xe9es du mois en cours. Comparez avec les mois pr\xe9c\xe9dents pour identifier les tendances."})]}),(0,a.jsxs)("div",{className:"glass-card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-success/20 rounded-lg",children:(0,a.jsx)(u.Z,{className:"h-5 w-5 text-success"})}),(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:"Objectif"})]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Maintenez un ratio \xe9pargne/revenus de 20% pour une sant\xe9 financi\xe8re optimale."})]}),(0,a.jsxs)("div",{className:"glass-card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-warning/20 rounded-lg",children:(0,a.jsx)(Z.Z,{className:"h-5 w-5 text-warning"})}),(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:"Conseil"})]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:i.balance>0?"Excellent ! Vous \xe9pargnez plus que vous ne d\xe9pensez. Continuez ainsi !":"Attention \xe0 vos d\xe9penses. Essayez de r\xe9duire les achats non essentiels."})]})]})]})}var $=s(17580),X=s(71866),Q=s(27648);function ee(){let{transactions:e}=(0,n.useFinanceStore)(),t=(0,l.nB)(),s=e.slice(0,5),r=e=>"income"===e?(0,a.jsx)($.Z,{className:"h-4 w-4 text-success"}):(0,a.jsx)(X.Z,{className:"h-4 w-4 text-danger"});return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Transactions R\xe9centes"}),(0,a.jsx)(Q.default,{href:"#",onClick:()=>n.useFinanceStore.getState().setCurrentView("transactions"),className:"text-sm text-financial-600 hover:text-financial-700",children:"Voir tout"})]}),(0,a.jsx)("div",{className:"space-y-4",children:0===s.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"text-gray-400 mb-2",children:"Aucune transaction"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Commencez par ajouter une transaction"})]}):s.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:r(e.type)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.description}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.category," •"," ",(0,l.iS)(new Date(e.date))]})]})]}),(0,a.jsxs)("div",{className:"font-semibold ".concat((0,l.oJ)("income"===e.type?e.amount:-e.amount)),children:["income"===e.type?"+":"-",t(Math.abs(e.amount))]})]},e.id))}),(0,a.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,a.jsx)("button",{onClick:()=>n.useFinanceStore.getState().setCurrentView("transactions"),className:"w-full px-4 py-2 bg-financial-100 hover:bg-financial-200 text-financial-700 rounded-lg transition-colors font-medium",children:"G\xe9rer les transactions"})})]})}function et(){let{goals:e}=(0,n.useFinanceStore)(),t=e.filter(e=>e.currentAmount<e.targetAmount).slice(0,3);return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Objectifs en Cours"}),(0,a.jsx)("button",{onClick:()=>n.useFinanceStore.getState().setCurrentView("goals"),className:"p-2 text-financial-600 hover:bg-financial-100 rounded-lg transition-colors",children:(0,a.jsx)(y.Z,{className:"h-5 w-5"})})]}),(0,a.jsx)("div",{className:"space-y-4",children:0===t.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(u.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,a.jsx)("div",{className:"text-gray-400 mb-2",children:"Aucun objectif actif"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Cr\xe9ez votre premier objectif d'\xe9pargne"})]}):t.map(e=>{let t=(0,l.Fp)(e.currentAmount,e.targetAmount),s=Math.ceil((new Date(e.deadline).getTime()-new Date().getTime())/864e5);return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:s>0?"".concat(s," jours"):"Termin\xe9"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:(0,l.xG)(e.currentAmount)}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:(0,l.xG)(e.targetAmount)})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-financial-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(t,100),"%")}})}),(0,a.jsxs)("div",{className:"text-center text-sm font-medium text-financial-600",children:[t,"%"]})]})]},e.id)})}),t.length>0&&(0,a.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,a.jsx)("button",{onClick:()=>n.useFinanceStore.getState().setCurrentView("goals"),className:"w-full px-4 py-2 bg-financial-100 hover:bg-financial-200 text-financial-700 rounded-lg transition-colors font-medium",children:"Voir tous les objectifs"})})]})}var es=s(90740),ea=s(94630),er=s(18930),en=s(32489),ei=s(48736);function el(e){let{transaction:t,onClose:n,onSave:i}=e,[l,c]=(0,r.useState)({date:new Date().toISOString().split("T")[0],amount:"",description:"",category:"",account:"Compte Principal",type:"expense",notes:"",tags:[]}),[o,d]=(0,r.useState)({});(0,r.useEffect)(()=>{t&&c({date:new Date(t.date).toISOString().split("T")[0],amount:Math.abs(t.amount).toString(),description:t.description,category:t.category,account:t.account,type:t.type,notes:t.notes||"",tags:t.tags||[]})},[t]);let m=()=>{let e={},t=parseFloat(l.amount);!l.amount||isNaN(t)||t<=0?e.amount="Veuillez entrer un montant valide sup\xe9rieur \xe0 0":t>1e6&&(e.amount="Le montant ne peut pas d\xe9passer 1 000 000 €");let s=l.description.trim();s?s.length<3?e.description="La description doit contenir au moins 3 caract\xe8res":s.length>100&&(e.description="La description ne peut pas d\xe9passer 100 caract\xe8res"):e.description="La description est requise";let a=new Date(l.date),r=new Date;return r.setHours(23,59,59,999),l.date?isNaN(a.getTime())?e.date="Date invalide":a>r?e.date="La date ne peut pas \xeatre future":a<new Date("2000-01-01")&&(e.date="La date est trop ancienne"):e.date="La date est requise",l.category||(e.category="La cat\xe9gorie est requise"),l.account||(e.account="Le compte est requis"),d(e),0===Object.keys(e).length},x=async e=>{if(e.preventDefault(),m())try{let{addTransaction:e,updateTransaction:a}=await Promise.resolve().then(s.bind(s,10880)),r={date:new Date(l.date),amount:"income"===l.type?Math.abs(parseFloat(l.amount)):-Math.abs(parseFloat(l.amount)),description:l.description.trim(),category:l.category,account:l.account,type:l.type,notes:l.notes.trim(),tags:l.tags};(null==t?void 0:t.id)?await a(t.id,r):await e(r),i()}catch(e){console.error("Error saving transaction:",e),alert("Erreur lors de la sauvegarde de la transaction")}},u=[{name:"Salaire",type:"income",icon:"\uD83D\uDCB0"},{name:"Investissement",type:"income",icon:"\uD83D\uDCC8"},{name:"Cadeau",type:"income",icon:"\uD83C\uDF81"},{name:"Autre",type:"income",icon:"\uD83D\uDCDD"},{name:"Alimentation",type:"expense",icon:"\uD83C\uDF4E"},{name:"Transport",type:"expense",icon:"\uD83D\uDE97"},{name:"Logement",type:"expense",icon:"\uD83C\uDFE0"},{name:"Sant\xe9",type:"expense",icon:"\uD83C\uDFE5"},{name:"Loisirs",type:"expense",icon:"\uD83C\uDFAE"},{name:"Shopping",type:"expense",icon:"\uD83D\uDECD️"},{name:"Restaurant",type:"expense",icon:"\uD83C\uDF7D️"},{name:"Services",type:"expense",icon:"⚡"},{name:"Autre",type:"expense",icon:"\uD83D\uDCDD"}].filter(e=>e.type===l.type);return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:t?"Modifier la transaction":"Nouvelle transaction"}),(0,a.jsx)("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(en.Z,{className:"h-5 w-5"})})]})}),(0,a.jsxs)("form",{onSubmit:x,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>c({...l,type:"expense"}),className:"p-4 rounded-lg border-2 transition-colors ".concat("expense"===l.type?"border-danger bg-danger/10 text-danger":"border-gray-200 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCB8"}),(0,a.jsx)("div",{className:"font-medium",children:"D\xe9pense"})]})}),(0,a.jsx)("button",{type:"button",onClick:()=>c({...l,type:"income"}),className:"p-4 rounded-lg border-2 transition-colors ".concat("income"===l.type?"border-success bg-success/10 text-success":"border-gray-200 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCB0"}),(0,a.jsx)("div",{className:"font-medium",children:"Revenu"})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Montant (€)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(H.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0.01",value:l.amount,onChange:e=>c({...l,amount:e.target.value}),className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-financial-500 focus:border-transparent ".concat(o.amount?"border-danger":"border-gray-300"),placeholder:"0.00",required:!0})]}),o.amount&&(0,a.jsx)("p",{className:"mt-1 text-sm text-danger",children:o.amount})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsx)("input",{type:"text",value:l.description,onChange:e=>c({...l,description:e.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-financial-500 focus:border-transparent ".concat(o.description?"border-danger":"border-gray-300"),placeholder:"Ex: Courses chez Carrefour",required:!0}),o.description&&(0,a.jsx)("p",{className:"mt-1 text-sm text-danger",children:o.description})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cat\xe9gorie"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:u.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>c({...l,category:e.name}),className:"p-3 rounded-lg border-2 transition-colors text-center ".concat(l.category===e.name?"border-financial-500 bg-financial-50":"border-gray-200 hover:border-gray-300"),children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:e.icon}),(0,a.jsx)("div",{className:"text-xs font-medium",children:e.name})]},e.name))}),o.category&&(0,a.jsx)("p",{className:"mt-1 text-sm text-danger",children:o.category})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(D.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{type:"date",value:l.date,onChange:e=>c({...l,date:e.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-financial-500 focus:border-transparent",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compte"}),(0,a.jsxs)("select",{value:l.account,onChange:e=>c({...l,account:e.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-financial-500 focus:border-transparent ".concat(o.account?"border-danger":"border-gray-300"),required:!0,children:[(0,a.jsx)("option",{value:"Compte Principal",children:"Compte Principal"}),(0,a.jsx)("option",{value:"Compte \xc9pargne",children:"Compte \xc9pargne"}),(0,a.jsx)("option",{value:"Esp\xe8ces",children:"Esp\xe8ces"}),(0,a.jsx)("option",{value:"Carte de Cr\xe9dit",children:"Carte de Cr\xe9dit"})]}),o.account&&(0,a.jsx)("p",{className:"mt-1 text-sm text-danger",children:o.account})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (optionnel)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(ei.Z,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),(0,a.jsx)("textarea",{value:l.notes,onChange:e=>c({...l,notes:e.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-financial-500 focus:border-transparent",rows:3,placeholder:"Ajoutez des notes..."})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:n,className:"px-6 py-3 text-gray-700 hover:text-gray-900 font-medium",children:"Annuler"}),(0,a.jsx)("button",{type:"submit",className:"px-6 py-3 bg-financial-600 hover:bg-financial-700 text-white rounded-lg transition-colors font-medium",children:t?"Modifier":"Ajouter"})]})]})]})})}var ec=s(45131),eo=s(65302);function ed(e){let{onClose:t,onImport:n}=e,[i,c]=(0,r.useState)("upload"),[o,d]=(0,r.useState)(null),[m,x]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[g,p]=(0,r.useState)({}),[v,f]=(0,r.useState)(null),[y,b]=(0,r.useState)(!1),j=(0,r.useRef)(null),N=[{key:"date",label:"Date",required:!0},{key:"description",label:"Description",required:!0},{key:"amount",label:"Montant",required:!0},{key:"type",label:"Type",required:!0},{key:"category",label:"Cat\xe9gorie",required:!1},{key:"account",label:"Compte",required:!1}],w=async e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){d(s);try{let e=await s.text(),t=(0,l.bW)(e);if(0===t.length){alert("Le fichier est vide ou invalide");return}x(t),h(t[0]),c("mapping")}catch(e){console.error("Error parsing file:",e),alert("Erreur lors de la lecture du fichier")}}},k=async()=>{if(v){b(!0);try{let{addTransaction:i}=await Promise.resolve().then(s.bind(s,10880)),l=[];for(let s=1;s<m.length;s++){let n=m[s];if(!(!n||n.every(e=>!e.trim())))try{var e,t,a,r;let s=n[g.date],i=n[g.description],c=parseFloat((null===(e=n[g.amount])||void 0===e?void 0:e.replace(",","."))||"0"),o=(null===(t=n[g.type])||void 0===t?void 0:t.toLowerCase().includes("revenu"))||(null===(a=n[g.type])||void 0===a?void 0:a.toLowerCase().includes("income"))||(null===(r=n[g.type])||void 0===r?void 0:r.toLowerCase().includes("+"))?"income":"expense",d=g.category?n[g.category]:"Autre",m=g.account?n[g.account]:"Compte Principal";if(!s||!i||!c)continue;let x=new Date(s);if(isNaN(x.getTime())||isNaN(c)||c<=0)continue;l.push({date:x,amount:c,description:i.trim(),category:d||"Autre",account:m||"Compte Principal",type:o,notes:"",tags:[]})}catch(e){console.warn("Skipping row ".concat(s+1,":"),e)}}for(let e of l)await i(e);c("complete"),n()}catch(e){console.error("Error importing transactions:",e),alert("Erreur lors de l'import des transactions")}finally{b(!1)}}},D=()=>{c("upload"),d(null),x([]),h([]),p({}),f(null),j.current&&(j.current.value=""),t()};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Importer des transactions"}),(0,a.jsx)("button",{onClick:D,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(en.Z,{className:"h-5 w-5"})})]})}),(0,a.jsxs)("div",{className:"p-6",children:["upload"===i&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-24 h-24 bg-financial-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(S.Z,{className:"h-12 w-12 text-financial-600"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"T\xe9l\xe9chargez votre fichier"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Support des formats CSV, avec les colonnes : Date, Description, Montant, Type"})]}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-financial-400 transition-colors",children:[(0,a.jsx)(ei.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("input",{ref:j,type:"file",accept:".csv,.txt",onChange:w,className:"hidden"}),(0,a.jsx)("button",{onClick:()=>{var e;return null===(e=j.current)||void 0===e?void 0:e.click()},className:"px-6 py-3 bg-financial-600 hover:bg-financial-700 text-white rounded-lg transition-colors font-medium",children:"Choisir un fichier"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"ou glissez-d\xe9posez ici"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Format attendu :"}),(0,a.jsxs)("div",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsx)("p",{children:"• Date : JJ/MM/AAAA ou AAAA-MM-JJ"}),(0,a.jsx)("p",{children:"• Montant : nombre avec . ou , comme s\xe9parateur d\xe9cimal"}),(0,a.jsx)("p",{children:'• Type : "revenu", "d\xe9pense", "+", "-", "income", "expense"'}),(0,a.jsx)("p",{children:"• Les autres colonnes sont optionnelles"})]})]})]}),"mapping"===i&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Mapper les colonnes"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Associez les colonnes de votre fichier aux champs de l'application"})]}),(0,a.jsx)("div",{className:"space-y-4",children:N.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-32",children:(0,a.jsxs)("label",{className:"text-sm font-medium ".concat(e.required?"text-gray-900":"text-gray-600"),children:[e.label,e.required&&(0,a.jsx)("span",{className:"text-danger ml-1",children:"*"})]})}),(0,a.jsxs)("select",{value:g[e.key]||"",onChange:t=>p({...g,[e.key]:parseInt(t.target.value)}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-financial-500 focus:border-transparent",required:e.required,children:[(0,a.jsx)("option",{value:"",children:"S\xe9lectionner une colonne"}),u.map((e,t)=>(0,a.jsxs)("option",{value:t,children:["Colonne ",t+1,": ",e]},t))]})]},e.key))}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,a.jsx)("button",{onClick:()=>c("upload"),className:"px-4 py-2 text-gray-700 hover:text-gray-900 font-medium",children:"Pr\xe9c\xe9dent"}),(0,a.jsx)("button",{onClick:()=>{let e=N.filter(e=>e.required&&!g[e.key]);if(e.length>0){alert("Veuillez mapper les champs requis: ".concat(e.map(e=>e.label).join(", ")));return}let t=[],s=[];for(let e=1;e<Math.min(m.length,21);e++){let l=m[e];if(!(!l||l.every(e=>!e.trim())))try{var a,r,n,i;let c=l[g.date],o=l[g.description],d=parseFloat((null===(a=l[g.amount])||void 0===a?void 0:a.replace(",","."))||"0"),m=(null===(r=l[g.type])||void 0===r?void 0:r.toLowerCase().includes("revenu"))||(null===(n=l[g.type])||void 0===n?void 0:n.toLowerCase().includes("income"))||(null===(i=l[g.type])||void 0===i?void 0:i.toLowerCase().includes("+"))?"income":"expense",x=g.category?l[g.category]:"Autre",u=g.account?l[g.account]:"Compte Principal";if(!c||!o||!d){s.push("Ligne ".concat(e+1,": Donn\xe9es manquantes"));continue}let h=new Date(c);if(isNaN(h.getTime())){s.push("Ligne ".concat(e+1,": Date invalide"));continue}if(isNaN(d)||d<=0){s.push("Ligne ".concat(e+1,": Montant invalide"));continue}t.push({date:h,amount:d,description:o.trim(),category:x||"Autre",account:u||"Compte Principal",type:m,notes:"",tags:[]})}catch(t){s.push("Ligne ".concat(e+1,": ").concat(t))}}f({data:t,errors:s,totalRows:m.length-1,validRows:t.length}),c("preview")},className:"px-6 py-2 bg-financial-600 hover:bg-financial-700 text-white rounded-lg transition-colors font-medium",children:"Continuer"})]})]}),"preview"===i&&v&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aper\xe7u de l'import"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:v.totalRows}),(0,a.jsx)("div",{className:"text-sm text-blue-800",children:"Lignes totales"})]}),(0,a.jsxs)("div",{className:"bg-success/10 p-4 rounded-lg text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-success",children:v.validRows}),(0,a.jsx)("div",{className:"text-sm text-success",children:"Lignes valides"})]}),(0,a.jsxs)("div",{className:"bg-danger/10 p-4 rounded-lg text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-danger",children:v.errors.length}),(0,a.jsx)("div",{className:"text-sm text-danger",children:"Erreurs"})]})]})]}),v.errors.length>0&&(0,a.jsxs)("div",{className:"bg-danger/10 border border-danger/20 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-danger mb-2",children:"Erreurs d\xe9tect\xe9es :"}),(0,a.jsx)("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:v.errors.map((e,t)=>(0,a.jsxs)("div",{className:"text-sm text-danger flex items-center",children:[(0,a.jsx)(ec.Z,{className:"h-4 w-4 mr-2 flex-shrink-0"}),e]},t))})]}),v.data.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Aper\xe7u des premi\xe8res transactions :"}),(0,a.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:v.data.slice(0,10).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(eo.Z,{className:"h-5 w-5 text-success"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.description}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.category," • ",new Date(e.date).toLocaleDateString("fr-FR")]})]})]}),(0,a.jsxs)("div",{className:"font-semibold ".concat("income"===e.type?"text-success":"text-danger"),children:["income"===e.type?"+":"-",e.amount.toFixed(2)," €"]})]},t))})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,a.jsx)("button",{onClick:()=>c("mapping"),className:"px-4 py-2 text-gray-700 hover:text-gray-900 font-medium",children:"Pr\xe9c\xe9dent"}),(0,a.jsx)("button",{onClick:k,disabled:y||0===v.validRows,className:"px-6 py-2 bg-success hover:bg-success/90 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Import en cours...":"Importer ".concat(v.validRows," transactions")})]})]}),"complete"===i&&(0,a.jsxs)("div",{className:"text-center space-y-6",children:[(0,a.jsx)("div",{className:"mx-auto w-24 h-24 bg-success/10 rounded-full flex items-center justify-center",children:(0,a.jsx)(eo.Z,{className:"h-12 w-12 text-success"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Import r\xe9ussi !"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Vos transactions ont \xe9t\xe9 import\xe9es avec succ\xe8s."})]}),(0,a.jsx)("button",{onClick:D,className:"px-6 py-2 bg-financial-600 hover:bg-financial-700 text-white rounded-lg transition-colors font-medium",children:"Terminer"})]})]})]})})}function em(){let{transactions:e,categories:t,refreshData:i}=(0,n.useFinanceStore)(),[c,o]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!1),[x,u]=(0,r.useState)(null),[h,g]=(0,r.useState)(""),[p,v]=(0,r.useState)("all"),[b,j]=(0,r.useState)("all"),N=e.filter(e=>{let t=e.description.toLowerCase().includes(h.toLowerCase())||e.category.toLowerCase().includes(h.toLowerCase()),s="all"===p||e.type===p,a="all"===b||e.category===b;return t&&s&&a}),w=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer cette transaction ?")){let{deleteTransaction:t}=await Promise.resolve().then(s.bind(s,10880));await t(e),await i()}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Transactions"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("button",{onClick:()=>m(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:[(0,a.jsx)(S.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Importer"})]}),(0,a.jsxs)("button",{onClick:()=>{let e=["Date,Description,Cat\xe9gorie,Montant,Type,Compte",...N.map(e=>[(0,l.iS)(new Date(e.date)),'"'.concat(e.description,'"'),e.category,e.amount.toString(),e.type,e.account].join(","))].join("\n");(0,l.downloadFile)(e,"transactions-".concat(new Date().toISOString().split("T")[0],".csv"),"text/csv")},className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:[(0,a.jsx)(E.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Exporter"})]}),(0,a.jsxs)("button",{onClick:()=>{u(null),o(!0)},className:"flex items-center space-x-2 px-4 py-2 bg-financial-600 hover:bg-financial-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Nouvelle transaction"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Rechercher...",value:h,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-financial-500 focus:border-transparent"})]}),(0,a.jsxs)("select",{value:p,onChange:e=>v(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-financial-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"Tous les types"}),(0,a.jsx)("option",{value:"income",children:"Revenus"}),(0,a.jsx)("option",{value:"expense",children:"D\xe9penses"})]}),(0,a.jsxs)("select",{value:b,onChange:e=>j(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-financial-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"Toutes les cat\xe9gories"}),t.map(e=>(0,a.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(es.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[N.length," transaction",1!==N.length?"s":""]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-success/10 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-success mb-1",children:"Total Revenus"}),(0,a.jsx)("div",{className:"text-xl font-bold text-success",children:(0,l.xG)(N.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0))})]}),(0,a.jsxs)("div",{className:"bg-danger/10 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-danger mb-1",children:"Total D\xe9penses"}),(0,a.jsx)("div",{className:"text-xl font-bold text-danger",children:(0,l.xG)(N.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0))})]}),(0,a.jsxs)("div",{className:"bg-financial-100 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-financial-600 mb-1",children:"Solde"}),(0,a.jsx)("div",{className:"text-xl font-bold ".concat((0,l.oJ)(N.reduce((e,t)=>e+("income"===t.type?t.amount:-t.amount),0))),children:(0,l.xG)(N.reduce((e,t)=>e+("income"===t.type?t.amount:-t.amount),0))})]})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Transactions (",N.length,")"]}),0===N.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-400 mb-2",children:"Aucune transaction trouv\xe9e"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Essayez de modifier vos filtres ou ajoutez une nouvelle transaction"})]}):(0,a.jsx)("div",{className:"space-y-2",children:N.map(e=>{var s;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg hover:bg-gray-50 transition-colors border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat("income"===e.type?"bg-success/10":"bg-danger/10"),children:(0,a.jsx)("span",{className:"text-lg",children:(null===(s=t.find(t=>t.name===e.category))||void 0===s?void 0:s.icon)||"\uD83D\uDCDD"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.description}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.category," • ",(0,l.iS)(new Date(e.date))," • ",e.account]}),e.notes&&(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:e.notes})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"text-lg font-semibold ".concat((0,l.oJ)("income"===e.type?e.amount:-e.amount)),children:["income"===e.type?"+":"-",(0,l.xG)(Math.abs(e.amount))]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{u(e),o(!0)},className:"p-2 text-gray-400 hover:text-financial-600 hover:bg-financial-100 rounded-lg transition-colors",title:"Modifier",children:(0,a.jsx)(ea.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>w(e.id),className:"p-2 text-gray-400 hover:text-danger hover:bg-danger/10 rounded-lg transition-colors",title:"Supprimer",children:(0,a.jsx)(er.Z,{className:"h-4 w-4"})})]})]})]},e.id)})})]})}),c&&(0,a.jsx)(el,{transaction:x,onClose:()=>{o(!1),u(null)},onSave:async()=>{await i(),o(!1),u(null)}}),d&&(0,a.jsx)(ed,{onClose:()=>m(!1),onImport:async()=>{await i(),m(!1)}})]})}var ex=s(53113);function eu(e){let{goal:t,onClose:n,onSave:i}=e,[l,c]=(0,r.useState)({name:"",targetAmount:"",currentAmount:"0",deadline:"",description:"",category:"",image:""}),[o,d]=(0,r.useState)({});(0,r.useEffect)(()=>{t&&c({name:t.name,targetAmount:t.targetAmount.toString(),currentAmount:t.currentAmount.toString(),deadline:new Date(t.deadline).toISOString().split("T")[0],description:t.description||"",category:t.category||"",image:t.image||""})},[t]);let m=()=>{let e={};return l.name.trim()||(e.name="Le nom est requis"),(!l.targetAmount||0>=parseFloat(l.targetAmount))&&(e.targetAmount="Le montant cible doit \xeatre sup\xe9rieur \xe0 0"),l.deadline?new Date(l.deadline)<=new Date&&(e.deadline="La date limite doit \xeatre dans le futur"):e.deadline="La date limite est requise",d(e),0===Object.keys(e).length},x=async e=>{if(e.preventDefault(),m())try{let{addGoal:e,updateGoal:a}=await Promise.resolve().then(s.bind(s,10880)),r={name:l.name.trim(),targetAmount:parseFloat(l.targetAmount),currentAmount:parseFloat(l.currentAmount)||0,deadline:new Date(l.deadline),description:l.description.trim(),category:l.category||"Autre",image:l.image.trim()};(null==t?void 0:t.id)?await a(t.id,r):await e(r),i()}catch(e){console.error("Error saving goal:",e),alert("Erreur lors de la sauvegarde de l'objectif")}},h=parseFloat(l.targetAmount)>0?parseFloat(l.currentAmount)/parseFloat(l.targetAmount)*100:0;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:t?"Modifier l'objectif":"Nouvel objectif"}),(0,a.jsx)("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(en.Z,{className:"h-5 w-5"})})]})}),(0,a.jsxs)("form",{onSubmit:x,className:"p-6 space-y-6",children:[l.image&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:l.image,alt:"Goal",className:"w-full h-48 object-cover rounded-lg"}),(0,a.jsx)("button",{type:"button",onClick:()=>c({...l,image:""}),className:"absolute top-2 right-2 p-2 bg-black bg-opacity-50 text-white rounded-lg hover:bg-opacity-70",children:(0,a.jsx)(en.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom de l'objectif"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:l.name,onChange:e=>c({...l,name:e.target.value}),className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-financial-500 focus:border-transparent ".concat(o.name?"border-danger":"border-gray-300"),placeholder:"Ex: Voyage au Japon",required:!0})]}),o.name&&(0,a.jsx)("p",{className:"mt-1 text-sm text-danger",children:o.name})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Montant cible"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(H.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0.01",value:l.targetAmount,onChange:e=>c({...l,targetAmount:e.target.value}),className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-financial-500 focus:border-transparent ".concat(o.targetAmount?"border-danger":"border-gray-300"),placeholder:"1000.00",required:!0})]}),o.targetAmount&&(0,a.jsx)("p",{className:"mt-1 text-sm text-danger",children:o.targetAmount})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Montant actuel"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(H.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",value:l.currentAmount,onChange:e=>c({...l,currentAmount:e.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-financial-500 focus:border-transparent",placeholder:"0.00"})]}),(0,a.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:["Progression: ",h.toFixed(1),"%"]})]})]}),h>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Progression"}),(0,a.jsxs)("span",{className:"font-medium",children:[h.toFixed(1),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-financial-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(h,100),"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date limite"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(D.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{type:"date",value:l.deadline,onChange:e=>c({...l,deadline:e.target.value}),className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-financial-500 focus:border-transparent ".concat(o.deadline?"border-danger":"border-gray-300"),required:!0})]}),o.deadline&&(0,a.jsx)("p",{className:"mt-1 text-sm text-danger",children:o.deadline})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cat\xe9gorie"}),(0,a.jsxs)("select",{value:l.category,onChange:e=>c({...l,category:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-financial-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"S\xe9lectionner une cat\xe9gorie"}),["Vacances","Voyage","Voiture","Maison","\xc9tudes","Mariage","Retraite","Urgence","Investissement","Autre"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image (optionnel)"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){let e=new FileReader;e.onload=e=>{var t;c({...l,image:null===(t=e.target)||void 0===t?void 0:t.result})},e.readAsDataURL(s)}},className:"hidden",id:"goal-image"}),(0,a.jsxs)("label",{htmlFor:"goal-image",className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors cursor-pointer",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:l.image?"Changer l'image":"Ajouter une image"})]}),l.image&&(0,a.jsx)("button",{type:"button",onClick:()=>c({...l,image:""}),className:"text-sm text-danger hover:text-danger/80",children:"Supprimer"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (optionnel)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(ei.Z,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),(0,a.jsx)("textarea",{value:l.description,onChange:e=>c({...l,description:e.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-financial-500 focus:border-transparent",rows:3,placeholder:"D\xe9crivez votre objectif..."})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:n,className:"px-6 py-3 text-gray-700 hover:text-gray-900 font-medium",children:"Annuler"}),(0,a.jsx)("button",{type:"submit",className:"px-6 py-3 bg-financial-600 hover:bg-financial-700 text-white rounded-lg transition-colors font-medium",children:t?"Modifier":"Cr\xe9er"})]})]})]})})}function eh(){let{goals:e,refreshData:t}=(0,n.useFinanceStore)(),s=(0,l.nB)(),[i,c]=(0,r.useState)(!1),[o,d]=(0,r.useState)(null),[m,x]=(0,r.useState)("all"),h=e.filter(e=>{let t=e.currentAmount>=e.targetAmount;return"active"===m?!t:"completed"!==m||t}),g=e.filter(e=>e.currentAmount<e.targetAmount),p=e.filter(e=>e.currentAmount>=e.targetAmount),v=e.reduce((e,t)=>e+t.currentAmount,0),f=e.reduce((e,t)=>e+t.targetAmount,0),b=(0,l.Fp)(v,f);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Objectifs"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Suivez vos projets d'\xe9pargne"})]}),(0,a.jsxs)("button",{onClick:()=>{d(null),c(!0)},className:"flex items-center space-x-2 px-4 py-2 bg-financial-600 hover:bg-financial-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Nouvel objectif"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-financial-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-financial-600 mb-1",children:"Total \xe9pargn\xe9"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-financial-700",children:s(v)})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Objectif total"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:s(f)})]}),(0,a.jsxs)("div",{className:"bg-success/10 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-success mb-1",children:"Progression globale"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-success",children:[b,"%"]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-blue-600 mb-1",children:"Objectifs actifs"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:g.length})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"flex space-x-8 px-6",children:[{key:"all",label:"Tous",count:e.length},{key:"active",label:"Actifs",count:g.length},{key:"completed",label:"Termin\xe9s",count:p.length}].map(e=>(0,a.jsxs)("button",{onClick:()=>x(e.key),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat(m===e.key?"border-financial-500 text-financial-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[e.label,(0,a.jsx)("span",{className:"ml-2 bg-gray-100 text-gray-600 py-0.5 px-2 rounded-full text-xs",children:e.count})]},e.key))})}),(0,a.jsx)("div",{className:"p-6",children:0===h.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(u.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("div",{className:"text-gray-400 mb-2",children:"active"===m?"Aucun objectif actif":"completed"===m?"Aucun objectif termin\xe9":"Aucun objectif"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"active"===m?"Cr\xe9ez votre premier objectif pour commencer \xe0 \xe9pargner !":"completed"===m?"Vos objectifs termin\xe9s appara\xeetront ici.":"Commencez par cr\xe9er un objectif d'\xe9pargne."})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(e=>{let t=(0,l.Fp)(e.currentAmount,e.targetAmount),r=e.currentAmount>=e.targetAmount,n=Math.ceil((new Date(e.deadline).getTime()-new Date().getTime())/864e5);return(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6 hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:e.name}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),r&&(0,a.jsx)(eo.Z,{className:"h-6 w-6 text-success flex-shrink-0"})]}),(0,a.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,a.jsxs)("div",{className:"relative w-24 h-24",children:[(0,a.jsxs)("svg",{className:"w-24 h-24 transform -rotate-90",viewBox:"0 0 100 100",children:[(0,a.jsx)("circle",{cx:"50",cy:"50",r:"40",stroke:"#e5e7eb",strokeWidth:"8",fill:"none"}),(0,a.jsx)("circle",{cx:"50",cy:"50",r:"40",stroke:r?"#10b981":"#3b82f6",strokeWidth:"8",fill:"none",strokeLinecap:"round",strokeDasharray:"".concat(2*Math.PI*40),strokeDashoffset:"".concat(2*Math.PI*40*(1-t/100)),className:"transition-all duration-500"})]}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[t,"%"]})})})]})}),(0,a.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"\xc9pargn\xe9"}),(0,a.jsx)("span",{className:"font-medium",children:s(e.currentAmount)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Objectif"}),(0,a.jsx)("span",{className:"font-medium",children:s(e.targetAmount)})]}),!r&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Restant"}),(0,a.jsx)("span",{className:"font-medium",children:s(e.targetAmount-e.currentAmount)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"\xc9ch\xe9ance"}),(0,a.jsx)("span",{className:"font-medium",children:r?"Termin\xe9":"".concat(n," jours")})]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(r?"bg-success":"bg-financial-600"),style:{width:"".concat(Math.min(t,100),"%")}})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>{d(e),c(!0)},className:"flex-1 px-3 py-2 text-sm bg-financial-100 hover:bg-financial-200 text-financial-700 rounded-lg transition-colors flex items-center justify-center space-x-1",children:[(0,a.jsx)(ea.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Modifier"})]}),!r&&(0,a.jsxs)("button",{onClick:()=>{},className:"flex-1 px-3 py-2 text-sm bg-success hover:bg-success/90 text-white rounded-lg transition-colors flex items-center justify-center space-x-1",children:[(0,a.jsx)(T.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Ajouter"})]})]})]},e.id)})})})]}),i&&(0,a.jsx)(eu,{goal:o,onClose:()=>{c(!1),d(null)},onSave:async()=>{await t(),c(!1),d(null)}})]})}var eg=s(77031),ep=s(31699);let ev=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#f97316","#6b7280"];function ef(){let{transactions:e,categories:t,selectedDateRange:s}=(0,n.useFinanceStore)(),[i,c]=(0,r.useState)("monthly"),o=e.filter(e=>{let t=new Date(e.date);return t>=s.start&&t<=s.end}),d=(()=>{let e=new Map;return o.forEach(t=>{let s=new Date(t.date).toISOString().slice(0,7),a=e.get(s)||{income:0,expenses:0,balance:0};"income"===t.type?a.income+=t.amount:a.expenses+=t.amount,a.balance=a.income-a.expenses,e.set(s,a)}),Array.from(e.entries()).map(e=>{let[t,s]=e;return{month:new Date(t+"-01").toLocaleDateString("fr-FR",{month:"short",year:"numeric"}),income:s.income,expenses:s.expenses,balance:s.balance}}).sort((e,t)=>e.month.localeCompare(t.month))})(),m=(()=>{let e=new Map;return o.filter(e=>"expense"===e.type).forEach(t=>{let s=e.get(t.category)||{amount:0,count:0};s.amount+=t.amount,s.count+=1,e.set(t.category,s)}),Array.from(e.entries()).map(e=>{let[t,s]=e;return{category:t,amount:s.amount,count:s.count,percentage:0}}).sort((e,t)=>t.amount-e.amount)})(),x=m.reduce((e,t)=>e+t.amount,0);m.forEach(e=>{e.percentage=x>0?e.amount/x*100:0});let u=d.length<2?[]:d.map((e,t)=>{let s=d[t-1];if(!s)return{...e,incomeTrend:0,expenseTrend:0};let a=s.income>0?(e.income-s.income)/s.income*100:0,r=s.expenses>0?(e.expenses-s.expenses)/s.expenses*100:0;return{...e,incomeTrend:Math.round(100*a)/100,expenseTrend:Math.round(100*r)/100}}),h=o.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),g=o.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0),p=o.length>0?(h+g)/o.length:0,v=Math.max(...o.filter(e=>"expense"===e.type).map(e=>e.amount),0);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Analyses Financi\xe8res"}),(0,a.jsxs)("p",{className:"text-gray-600 mt-1",children:["P\xe9riode: ",(0,l.iS)(s.start)," - ",(0,l.iS)(s.end)]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(es.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsxs)("select",{value:i,onChange:e=>c(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-financial-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"monthly",children:"Vue Mensuelle"}),(0,a.jsx)("option",{value:"category",children:"Par Cat\xe9gorie"}),(0,a.jsx)("option",{value:"trends",children:"Tendances"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"bg-success/10 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-success mb-1",children:"Revenus Totaux"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-success",children:(0,l.xG)(h)})]}),(0,a.jsx)(T.Z,{className:"h-8 w-8 text-success"})]})}),(0,a.jsx)("div",{className:"bg-danger/10 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-danger mb-1",children:"D\xe9penses Totales"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-danger",children:(0,l.xG)(g)})]}),(0,a.jsx)(L.Z,{className:"h-8 w-8 text-danger"})]})}),(0,a.jsx)("div",{className:"bg-financial-100 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-financial-600 mb-1",children:"Solde"}),(0,a.jsx)("div",{className:"text-2xl font-bold ".concat(h-g>=0?"text-success":"text-danger"),children:(0,l.xG)(h-g)})]}),(0,a.jsx)(H.Z,{className:"h-8 w-8 text-financial-600"})]})}),(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Transactions"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:o.length})]}),(0,a.jsx)(D.Z,{className:"h-8 w-8 text-gray-400"})]})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4 mb-6",children:[{key:"monthly",label:"Vue Mensuelle",icon:D.Z},{key:"category",label:"Par Cat\xe9gorie",icon:H.Z},{key:"trends",label:"Tendances",icon:T.Z}].map(e=>(0,a.jsxs)("button",{onClick:()=>c(e.key),className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ".concat(i===e.key?"bg-financial-100 text-financial-700":"text-gray-600 hover:bg-gray-100"),children:[(0,a.jsx)(e.icon,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e.label})]},e.key))}),"monthly"===i&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\xc9volution Mensuelle"}),d.length>0?(0,a.jsx)(I.h,{width:"100%",height:400,children:(0,a.jsxs)(eg.v,{data:d,margin:{top:20,right:30,left:20,bottom:5},children:[(0,a.jsx)(U.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(J.K,{dataKey:"month"}),(0,a.jsx)(W.B,{tickFormatter:e=>"".concat(e/1e3,"k")}),(0,a.jsx)(G.u,{formatter:e=>(0,l.xG)(Number(e))}),(0,a.jsx)(ep.$,{dataKey:"income",fill:"#10b981",name:"Revenus"}),(0,a.jsx)(ep.$,{dataKey:"expenses",fill:"#ef4444",name:"D\xe9penses"})]})}):(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Aucune donn\xe9e disponible pour cette p\xe9riode"})]}),"category"===i&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"R\xe9partition par Cat\xe9gorie"}),m.length>0?(0,a.jsx)(I.h,{width:"100%",height:300,children:(0,a.jsxs)(B.u,{children:[(0,a.jsx)(O.b,{data:m,cx:"50%",cy:"50%",outerRadius:100,dataKey:"amount",label:e=>{let{name:t,percentage:s}=e;return"".concat(t," (").concat(s.toFixed(1),"%)")},children:m.map((e,t)=>(0,a.jsx)(q.b,{fill:ev[t%ev.length]},"cell-".concat(t)))}),(0,a.jsx)(G.u,{formatter:e=>(0,l.xG)(Number(e))})]})}):(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Aucune d\xe9pense dans cette p\xe9riode"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"D\xe9tails par Cat\xe9gorie"}),(0,a.jsx)("div",{className:"space-y-3",children:m.slice(0,8).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:ev[t%ev.length]}}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.category})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:(0,l.xG)(e.amount)}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.percentage.toFixed(1),"% • ",e.count," transactions"]})]})]},e.category))})]})]}),"trends"===i&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tendances d'\xc9volution"}),u.length>1?(0,a.jsx)(I.h,{width:"100%",height:400,children:(0,a.jsxs)(V.w,{data:u,margin:{top:20,right:30,left:20,bottom:5},children:[(0,a.jsx)(U.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(J.K,{dataKey:"month"}),(0,a.jsx)(W.B,{tickFormatter:e=>"".concat(e,"%")}),(0,a.jsx)(G.u,{formatter:(e,t)=>["".concat(Number(e).toFixed(1),"%"),"incomeTrend"===t?"Tendance Revenus":"Tendance D\xe9penses"]}),(0,a.jsx)(K.x,{type:"monotone",dataKey:"incomeTrend",stroke:"#10b981",strokeWidth:3,name:"Tendance Revenus"}),(0,a.jsx)(K.x,{type:"monotone",dataKey:"expenseTrend",stroke:"#ef4444",strokeWidth:3,name:"Tendance D\xe9penses"})]})}):(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Donn\xe9es insuffisantes pour l'analyse des tendances"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Statistiques Cl\xe9s"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Transaction moyenne"}),(0,a.jsx)("span",{className:"font-semibold",children:(0,l.xG)(p)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Plus grosse d\xe9pense"}),(0,a.jsx)("span",{className:"font-semibold",children:(0,l.xG)(v)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Nombre de cat\xe9gories"}),(0,a.jsx)("span",{className:"font-semibold",children:m.length})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"P\xe9riode analys\xe9e"}),(0,a.jsxs)("span",{className:"font-semibold",children:[Math.ceil((s.end.getTime()-s.start.getTime())/864e5)," jours"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recommandations"}),(0,a.jsxs)("div",{className:"space-y-3",children:[g>h&&(0,a.jsxs)("div",{className:"p-3 bg-danger/10 border border-danger/20 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-danger font-medium",children:"Alerte: D\xe9penses \xe9lev\xe9es"}),(0,a.jsx)("div",{className:"text-xs text-danger mt-1",children:"Vos d\xe9penses d\xe9passent vos revenus. Pensez \xe0 r\xe9duire les d\xe9penses non essentielles."})]}),m.length>0&&m[0].percentage>40&&(0,a.jsxs)("div",{className:"p-3 bg-warning/10 border border-warning/20 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-warning font-medium",children:"Cat\xe9gorie dominante"}),(0,a.jsxs)("div",{className:"text-xs text-warning mt-1",children:[m[0].category," repr\xe9sente ",m[0].percentage.toFixed(1),"% de vos d\xe9penses."]})]}),(0,a.jsxs)("div",{className:"p-3 bg-financial-100 border border-financial-200 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-financial-700 font-medium",children:"\xc9pargne recommand\xe9e"}),(0,a.jsx)("div",{className:"text-xs text-financial-600 mt-1",children:"Essayez d'\xe9pargner au moins 20% de vos revenus mensuels."})]})]})]})]})]})}var ey=s(85929),eb=s(97226),ej=s(12805),eN=s(82431),ew=s(22252);function ek(){let{settings:e,refreshData:t}=(0,n.useFinanceStore)(),{theme:i,setTheme:m,animationLevel:x,setAnimationLevel:u}=(0,c.Fg)(),[h,p]=(0,r.useState)(null),[v,f]=(0,r.useState)(!1),[y,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{e&&p(e)},[e]);let N=async()=>{if(h){f(!0);try{let{updateSettings:e}=await Promise.resolve().then(s.bind(s,10880));await e(h),await t(),b({type:"success",text:"Param\xe8tres sauvegard\xe9s avec succ\xe8s !"})}catch(e){console.error("Error saving settings:",e),b({type:"error",text:"Erreur lors de la sauvegarde des param\xe8tres."})}finally{f(!1)}setTimeout(()=>b(null),3e3)}},w=async()=>{if(confirm("⚠️ Cette action supprimera TOUTES vos donn\xe9es de fa\xe7on permanente. \xcates-vous absolument s\xfbr ?")&&confirm("⚠️ Derni\xe8re confirmation : Toutes vos transactions, objectifs et param\xe8tres seront supprim\xe9s. Continuer ?"))try{let{db:e}=await Promise.resolve().then(s.bind(s,10880));await e.transactions.clear(),await e.categories.clear(),await e.goals.clear(),await e.accounts.clear(),await e.budgets.clear(),await e.settings.clear();let{initializeDatabase:a}=await Promise.resolve().then(s.bind(s,10880));await a(),await t(),b({type:"success",text:"Toutes les donn\xe9es ont \xe9t\xe9 supprim\xe9es."})}catch(e){console.error("Error clearing data:",e),b({type:"error",text:"Erreur lors de la suppression des donn\xe9es."})}setTimeout(()=>b(null),3e3)},k=async()=>{try{let{exportData:e}=await Promise.resolve().then(s.bind(s,10880)),t=await e(),a=JSON.stringify(t,null,2);(0,l.downloadFile)(a,"finance-backup-".concat(new Date().toISOString().split("T")[0],".json"),"application/json"),b({type:"success",text:"Donn\xe9es export\xe9es avec succ\xe8s !"})}catch(e){console.error("Error exporting data:",e),b({type:"error",text:"Erreur lors de l'export des donn\xe9es."})}setTimeout(()=>b(null),3e3)},D=async e=>{var a;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(r){try{let e=await r.text(),a=JSON.parse(e);if(confirm("Cette action remplacera toutes vos donn\xe9es actuelles. \xcates-vous s\xfbr ?")){let{importData:e}=await Promise.resolve().then(s.bind(s,10880));await e(a),await t(),b({type:"success",text:"Donn\xe9es import\xe9es avec succ\xe8s !"})}}catch(e){console.error("Error importing data:",e),b({type:"error",text:"Erreur lors de l'import des donn\xe9es."})}e.target.value="",setTimeout(()=>b(null),3e3)}},C={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}};return(0,a.jsxs)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-8",children:[(0,a.jsxs)(o.E.div,{variants:C,className:"text-center mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[(0,a.jsx)(o.E.div,{animate:{rotate:[0,360]},transition:{duration:4,repeat:1/0,ease:"linear"},className:"p-3 bg-gradient-to-r from-financial-500 to-blue-500 rounded-full",children:(0,a.jsx)(g.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Param\xe8tres avanc\xe9s"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Personnalisez votre exp\xe9rience"})]})]}),(0,a.jsx)(d.M,{children:y&&(0,a.jsx)(o.E.div,{initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},className:"p-4 rounded-lg mb-6 ".concat("success"===y.type?"bg-success/10 border border-success/20 text-success":"bg-danger/10 border border-danger/20 text-danger"),children:y.text})})]}),(0,a.jsxs)(o.E.div,{variants:C,className:"glass-card p-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,a.jsx)(ej.Z,{className:"h-5 w-5 mr-2 text-financial-400"}),"Th\xe8me & Apparence"]}),(0,a.jsx)(function(){let{theme:e,setTheme:t,animationLevel:s,setAnimationLevel:r}=(0,c.Fg)(),n=[{id:"light",name:"Clair",icon:ey.Z,color:"from-yellow-400 to-orange-500"},{id:"dark",name:"Sombre",icon:eb.Z,color:"from-gray-700 to-gray-900"},{id:"ocean",name:"Oc\xe9an",icon:ej.Z,color:"from-cyan-500 to-blue-600"},{id:"forest",name:"For\xeat",icon:j.Z,color:"from-green-500 to-emerald-600"},{id:"cosmic",name:"Cosmique",icon:j.Z,color:"from-purple-500 to-pink-600"}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-white mb-4",children:"Th\xe8me"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:n.map(s=>{let r=s.icon,n=e===s.id;return(0,a.jsxs)(o.E.button,{onClick:()=>t(s.id),className:"\n                  relative p-4 rounded-xl border-2 transition-all duration-300\n                  ".concat(n?"border-financial-500 bg-financial-500/20 scale-105":"border-white/20 bg-white/5 hover:border-white/40 hover:bg-white/10","\n                  group overflow-hidden\n                "),whileHover:{scale:n?1.05:1.02},whileTap:{scale:.98},children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(s.color," opacity-20 group-hover:opacity-30 transition-opacity")}),(0,a.jsxs)("div",{className:"relative z-10 text-center",children:[(0,a.jsx)(r,{className:"h-8 w-8 mx-auto mb-2 ".concat(n?"text-financial-400":"text-gray-300")}),(0,a.jsx)("div",{className:"text-sm font-medium ".concat(n?"text-white":"text-gray-200"),children:s.name})]}),n&&(0,a.jsx)(o.E.div,{animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0},className:"absolute top-2 right-2 w-5 h-5 bg-financial-500 rounded-full flex items-center justify-center shadow-lg",children:(0,a.jsx)(eo.Z,{className:"w-3 h-3 text-white"})})]},s.id)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-white mb-4",children:"Niveau d'Animation"}),(0,a.jsx)("div",{className:"space-y-2",children:[{id:"minimal",name:"Minimal",description:"Animations r\xe9duites"},{id:"normal",name:"Normal",description:"Animations \xe9quilibr\xe9es"},{id:"rich",name:"Riche",description:"Animations compl\xe8tes"}].map(e=>(0,a.jsxs)(o.E.label,{whileHover:{scale:1.01},className:"\n                flex items-center justify-between p-4 rounded-xl border-2 cursor-pointer transition-all duration-200\n                ".concat(s===e.id?"border-financial-500 bg-financial-500/20":"border-white/20 bg-white/5 hover:border-white/40 hover:bg-white/10","\n              "),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"animation",value:e.id,checked:s===e.id,onChange:()=>r(e.id),className:"mr-3 w-4 h-4 text-financial-600 bg-white/10 border-white/30 focus:ring-financial-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-white",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-300",children:e.description})]})]}),s===e.id&&(0,a.jsx)(eo.Z,{className:"h-5 w-5 text-financial-400"})]},e.id))})]})]})},{})]}),(0,a.jsxs)(o.E.div,{variants:C,className:"glass-card p-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,a.jsx)(A.Z,{className:"h-5 w-5 mr-2 text-financial-400"}),"Param\xe8tres G\xe9n\xe9raux"]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Devise"}),(0,a.jsxs)("select",{value:(null==h?void 0:h.currency)||"EUR",onChange:e=>p({...h,currency:e.target.value}),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-financial-500 backdrop-blur-sm",style:{colorScheme:"dark"},children:[(0,a.jsx)("option",{value:"EUR",className:"bg-slate-800 text-white",children:"€ Euro (EUR)"}),(0,a.jsx)("option",{value:"USD",className:"bg-slate-800 text-white",children:"$ Dollar (USD)"}),(0,a.jsx)("option",{value:"GBP",className:"bg-slate-800 text-white",children:"\xa3 Livre (GBP)"}),(0,a.jsx)("option",{value:"CHF",className:"bg-slate-800 text-white",children:"Fr Franc (CHF)"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Langue"}),(0,a.jsxs)("select",{value:(null==h?void 0:h.language)||"fr",onChange:e=>p({...h,language:e.target.value}),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-financial-500 backdrop-blur-sm",style:{colorScheme:"dark"},children:[(0,a.jsx)("option",{value:"fr",className:"bg-slate-800 text-white",children:"Fran\xe7ais"}),(0,a.jsx)("option",{value:"en",className:"bg-slate-800 text-white",children:"English"})]})]})]})})]}),(0,a.jsxs)(o.E.div,{variants:C,className:"glass-card p-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,a.jsx)(eN.Z,{className:"h-5 w-5 mr-2 text-financial-400"}),"Gestion des Donn\xe9es"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/10 rounded-lg border border-white/20",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-white",children:"Exporter les donn\xe9es"}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"T\xe9l\xe9chargez une copie compl\xe8te de vos donn\xe9es"})]}),(0,a.jsxs)(o.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:k,className:"flex items-center space-x-2 px-4 py-2 bg-financial-500 hover:bg-financial-600 text-white rounded-lg transition-all duration-200",children:[(0,a.jsx)(E.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Exporter"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/10 rounded-lg border border-white/20",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-white",children:"Importer des donn\xe9es"}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Restaurez vos donn\xe9es depuis un fichier JSON"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2 px-4 py-2 bg-financial-500 hover:bg-financial-600 text-white rounded-lg transition-all duration-200 cursor-pointer",children:[(0,a.jsx)(S.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Importer"}),(0,a.jsx)("input",{type:"file",accept:".json",onChange:D,className:"hidden"})]})]}),(0,a.jsx)("div",{className:"p-4 bg-danger/10 rounded-lg border border-danger/20",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium text-danger flex items-center",children:[(0,a.jsx)(ew.Z,{className:"h-4 w-4 mr-2"}),"Supprimer toutes les donn\xe9es"]}),(0,a.jsx)("div",{className:"text-sm text-danger/80",children:"⚠️ Cette action est irr\xe9versible et supprimera toutes vos donn\xe9es"})]}),(0,a.jsx)(o.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:w,className:"px-4 py-2 bg-danger hover:bg-danger/90 text-white rounded-lg transition-all duration-200",children:"Supprimer"})]})})]})]}),(0,a.jsx)(o.E.div,{variants:C,className:"flex justify-center",children:(0,a.jsx)(o.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:N,disabled:v,className:"px-8 py-3 bg-gradient-to-r from-financial-500 to-blue-500 hover:from-financial-600 hover:to-blue-600 disabled:from-gray-500 disabled:to-gray-600 text-white rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl font-medium flex items-center space-x-2",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.E.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),(0,a.jsx)("span",{children:"Sauvegarde..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eo.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Sauvegarder les param\xe8tres"})]})})})]})}function eD(){let{currentView:e,loadData:t}=(0,n.useFinanceStore)();return(0,r.useEffect)(()=>{let e=e=>{var t;console.error("Global error caught:",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error:e.error}),console.error("Stack trace:",null===(t=e.error)||void 0===t?void 0:t.stack)},t=e=>{console.error("Unhandled promise rejection:",{reason:e.reason,promise:e.promise})};return window.addEventListener("error",e),window.addEventListener("unhandledrejection",t),()=>{window.removeEventListener("error",e),window.removeEventListener("unhandledrejection",t)}},[]),!function(){let{settings:e}=(0,n.useFinanceStore)();(0,r.useEffect)(()=>{if(!(null==e?void 0:e.autoBackup))return;let t=async()=>{try{let e=localStorage.getItem("lastBackupDate"),t=new Date,s=t.getMonth(),a=t.getFullYear();if(e){let t=new Date(e),r=t.getMonth(),n=t.getFullYear();if(r===s&&n===a)return}let r=await (0,i.exportData)(),n=JSON.stringify(r,null,2),c="auto-backup-".concat(t.toISOString().split("T")[0],".json");(0,l.downloadFile)(n,c,"application/json"),localStorage.setItem("lastBackupDate",t.toISOString()),console.log("Auto-backup completed successfully")}catch(e){console.error("Auto-backup failed:",e)}};t();let s=setInterval(t,36e5);return()=>clearInterval(s)},[null==e?void 0:e.autoBackup])}(),!function(){let{refreshData:e}=(0,n.useFinanceStore)();(0,r.useEffect)(()=>{let t=t=>{"financeDataUpdated"===t.key&&e()},s=t=>{var s;(null===(s=t.detail)||void 0===s?void 0:s.type)==="dataUpdated"&&e()};return window.addEventListener("storage",t),window.addEventListener("financeDataUpdated",s),()=>{window.removeEventListener("storage",t),window.removeEventListener("financeDataUpdated",s)}},[e])}(),(0,r.useEffect)(()=>{(0,i.initializeDatabase)().then(()=>{t()}).catch(e=>{console.error("Failed to initialize app:",e)})},[t]),(0,a.jsxs)("div",{className:"flex h-screen",style:{background:"var(--bg-primary)"},children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(w,{})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,a.jsx)(F,{}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto p-6",role:"main",children:(()=>{switch(e){case"dashboard":default:return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(z,{}),(0,a.jsx)(_,{}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsx)(ee,{}),(0,a.jsx)(et,{})]})]});case"transactions":return(0,a.jsx)(em,{});case"goals":return(0,a.jsx)(eh,{});case"analytics":return(0,a.jsx)(ef,{});case"settings":return(0,a.jsx)(ek,{})}})()})]})]})}},97620:function(e,t,s){"use strict";s.d(t,{Fg:function(){return l},f6:function(){return i}});var a=s(57437),r=s(2265);let n=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[i,l]=(0,r.useState)("light"),[c,o]=(0,r.useState)("normal"),[d,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("finance-theme"),t=localStorage.getItem("finance-animation");e&&l(e),t&&o(t),(async()=>{try{let{getSettings:t}=await Promise.all([s.e(96),s.e(880)]).then(s.bind(s,10880)),a=await t();if(null==a?void 0:a.theme){let t="light";"dark"===a.theme?t="dark":"system"===a.theme&&(t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),e&&e===t||(l(t),localStorage.setItem("finance-theme",t))}}catch(e){console.error("Error syncing theme with database:",e)}finally{m(!0)}})()},[]),(0,r.useEffect)(()=>{document.documentElement.setAttribute("data-theme",i),document.documentElement.setAttribute("data-animation",c),document.body.classList.add("theme-transitioning"),setTimeout(()=>{document.body.classList.remove("theme-transitioning")},300)},[i,c]);let x=async e=>{l(e),localStorage.setItem("finance-theme",e);try{let{getSettings:t,updateSettings:a}=await Promise.all([s.e(96),s.e(880)]).then(s.bind(s,10880)),r=await t();(null==r?void 0:r.id)&&await a({theme:e})}catch(e){console.error("Error saving theme to database:",e)}},u="dark"===i||"ocean"===i||"forest"===i||"cosmic"===i;return(0,a.jsx)(n.Provider,{value:{theme:i,animationLevel:c,setTheme:x,setAnimationLevel:e=>{o(e),localStorage.setItem("finance-animation",e)},isDark:u},children:t})}function l(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},10880:function(e,t,s){"use strict";s.d(t,{CP:function(){return m},M6:function(){return x},T8:function(){return g},addGoal:function(){return u},addTransaction:function(){return l},db:function(){return n},deleteTransaction:function(){return d},exportData:function(){return f},f1:function(){return c},getSettings:function(){return p},importData:function(){return y},initializeDatabase:function(){return i},updateGoal:function(){return h},updateSettings:function(){return v},updateTransaction:function(){return o}});var a=s(42179);class r extends a.ZP{constructor(){super("FinanceManager"),this.version(1).stores({transactions:"++id, date, amount, category, account, type",categories:"++id, name, type, parentId",goals:"++id, name, targetAmount, currentAmount, deadline",accounts:"++id, name, type, balance, currency, isActive",budgets:"++id, categoryId, amount, period, startDate",settings:"++id"})}}let n=new r;async function i(){try{if(!window.indexedDB){console.warn("IndexedDB not available in this environment");return}let e=await n.categories.count();0===e&&await n.categories.bulkAdd([{name:"Alimentation",color:"#10b981",icon:"\uD83C\uDF4E",type:"expense"},{name:"Transport",color:"#3b82f6",icon:"\uD83D\uDE97",type:"expense"},{name:"Logement",color:"#8b5cf6",icon:"\uD83C\uDFE0",type:"expense"},{name:"Sant\xe9",color:"#ef4444",icon:"\uD83C\uDFE5",type:"expense"},{name:"Loisirs",color:"#f59e0b",icon:"\uD83C\uDFAE",type:"expense"},{name:"Shopping",color:"#ec4899",icon:"\uD83D\uDECD️",type:"expense"},{name:"Restaurant",color:"#f97316",icon:"\uD83C\uDF7D️",type:"expense"},{name:"Services",color:"#6b7280",icon:"⚡",type:"expense"},{name:"Salaire",color:"#10b981",icon:"\uD83D\uDCB0",type:"income"},{name:"Investissement",color:"#6366f1",icon:"\uD83D\uDCC8",type:"income"},{name:"Cadeau",color:"#f59e0b",icon:"\uD83C\uDF81",type:"income"},{name:"Autre",color:"#6b7280",icon:"\uD83D\uDCDD",type:"both"}]);let t=await n.accounts.count();0===t&&await n.accounts.add({name:"Compte Principal",type:"checking",balance:0,currency:"EUR",color:"#3b82f6",isActive:!0});let s=await n.settings.count();0===s&&await n.settings.add({currency:"EUR",language:"fr",theme:"system",dateFormat:"dd/MM/yyyy",weekStartsOn:"monday",notifications:!0,autoBackup:!0}),console.log("Database initialized successfully")}catch(e){console.error("Error initializing database:",e),console.warn("Database initialization failed, app will run with limited functionality")}}async function l(e){return await n.transactions.add({...e,createdAt:new Date,updatedAt:new Date})}async function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return await n.transactions.orderBy("date").reverse().offset(t).limit(e).toArray()}async function o(e,t){return await n.transactions.update(e,{...t,updatedAt:new Date})}async function d(e){return await n.transactions.delete(e)}async function m(){return await n.categories.toArray()}async function x(){return await n.goals.toArray()}async function u(e){return await n.goals.add({...e,createdAt:new Date,updatedAt:new Date})}async function h(e,t){return await n.goals.update(e,{...t,updatedAt:new Date})}async function g(){return await n.accounts.toArray()}async function p(){return(await n.settings.toArray())[0]||null}async function v(e){let t=await p();if(null==t?void 0:t.id)return await n.settings.update(t.id,e)}async function f(){let[e,t,s,a,r,i]=await Promise.all([n.transactions.toArray(),n.categories.toArray(),n.goals.toArray(),n.accounts.toArray(),n.budgets.toArray(),n.settings.toArray()]);return{version:"1.0.0",exportedAt:new Date,transactions:e,categories:t,goals:s,accounts:a,budgets:r,settings:i[0]||null}}async function y(e){await Promise.all([n.transactions.clear(),n.categories.clear(),n.goals.clear(),n.accounts.clear(),n.budgets.clear(),n.settings.clear()]),await Promise.all([n.transactions.bulkAdd(e.transactions||[]),n.categories.bulkAdd(e.categories||[]),n.goals.bulkAdd(e.goals||[]),n.accounts.bulkAdd(e.accounts||[]),n.budgets.bulkAdd(e.budgets||[]),e.settings?n.settings.add(e.settings):Promise.resolve()])}},92371:function(e,t,s){"use strict";s.r(t),s.d(t,{useFinanceStore:function(){return o}});var a=s(59625),r=s(89134),n=s(10880),i=s(31559),l=s(13657),c=s(30702);let o=(0,a.Ue)()((0,r.XR)((e,t)=>({transactions:[],categories:[],goals:[],accounts:[],settings:null,currentView:"dashboard",isLoading:!1,error:null,selectedDateRange:{start:(0,i.Z)(new Date),end:(0,l.Z)(new Date)},setCurrentView:t=>e({currentView:t}),setDateRange:(t,s)=>e({selectedDateRange:{start:t,end:s}}),setError:t=>e({error:t}),loadData:async()=>{e({isLoading:!0});try{let[t,s,a,r,i]=await Promise.all([(0,n.f1)(),(0,n.CP)(),(0,n.M6)(),(0,n.T8)(),(0,n.getSettings)()]);e({transactions:t,categories:s,goals:a,accounts:r,settings:i,isLoading:!1})}catch(t){console.error("Error loading data:",t),e({isLoading:!1,error:t instanceof Error?t.message:"Erreur lors du chargement des donn\xe9es"})}},addTransaction:async e=>{try{await (0,n.addTransaction)(e),await t().refreshData()}catch(e){throw console.error("Error adding transaction:",e),e}},updateTransaction:async(e,s)=>{try{await (0,n.updateTransaction)(e,s),await t().refreshData()}catch(e){throw console.error("Error updating transaction:",e),e}},deleteTransaction:async e=>{try{await (0,n.deleteTransaction)(e),await t().refreshData()}catch(e){throw console.error("Error deleting transaction:",e),e}},refreshData:async()=>{let{loadData:e}=t();await e()},getFinancialPulse:()=>{let{transactions:e,selectedDateRange:s}=t(),a=e.filter(e=>(0,c.Z)(new Date(e.date),{start:s.start,end:s.end})),r=a.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),n=a.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0),i=r-n,l=Math.max(1,Math.ceil((s.end.getTime()-new Date().getTime())/864e5)),o=l>0?i/l:0,d="healthy";return o<0?d="danger":o<20&&(d="warning"),{status:d,score:Math.max(0,Math.min(100,r>0?50+i/r*50:0===n?100:0)),monthlyIncome:r,monthlyExpenses:n,remainingBudget:i,daysUntilNextIncome:l,projectedEndOfMonth:i}},getMonthlyStats:()=>{let{transactions:e,selectedDateRange:s}=t(),a=e.filter(e=>(0,c.Z)(new Date(e.date),{start:s.start,end:s.end})),r=a.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),n=a.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0);return{income:r,expenses:n,balance:r-n}},getCategoryStats:()=>{let{transactions:e,categories:s,selectedDateRange:a}=t(),r=e.filter(e=>(0,c.Z)(new Date(e.date),{start:a.start,end:a.end})).reduce((e,t)=>{let s=t.category||"Autre";return e[s]=(e[s]||0)+t.amount,e},{}),n=Object.values(r).reduce((e,t)=>e+t,0);return Object.entries(r).map(e=>{let[t,s]=e;return{category:t,amount:s,percentage:n>0?s/n*100:0}}).sort((e,t)=>t.amount-e.amount)}})))},93448:function(e,t,s){"use strict";function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EUR";return new Intl.NumberFormat("fr-FR",{style:"currency",currency:t}).format(e)}function r(){let{useFinanceStore:e}=s(92371),{settings:t}=e(),r=(null==t?void 0:t.currency)||"EUR";return e=>a(e,r)}function n(e){return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(e)}function i(e,t){return 0===t?0:Math.round(e/t*100)}function l(e){return e>0?"text-success":e<0?"text-danger":"text-gray-600"}function c(e){return e.split("\n").map(e=>{let t=[],s="",a=!1;for(let r=0;r<e.length;r++){let n=e[r],i=e[r+1];'"'===n?a&&'"'===i?(s+='"',r++):a=!a:","!==n||a?s+=n:(t.push(s.trim()),s="")}return t.push(s.trim()),t})}function o(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/plain",a=new Blob([e],{type:s}),r=URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}s.d(t,{Fp:function(){return i},bW:function(){return c},downloadFile:function(){return o},iS:function(){return n},nB:function(){return r},oJ:function(){return l},xG:function(){return a}})}},function(e){e.O(0,[96,978,971,117,744],function(){return e(e.s=95411)}),_N_E=e.O()}]);