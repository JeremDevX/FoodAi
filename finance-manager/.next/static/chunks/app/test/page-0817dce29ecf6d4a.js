(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[928,880],{85953:function(t,e,n){Promise.resolve().then(n.bind(n,79742))},79742:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return o}});var a=n(57437),i=n(2265),s=n(10880);function o(){let[t,e]=(0,i.useState)([]),[n,o]=(0,i.useState)(!1),r=t=>{e(e=>[...e,t])},c=async()=>{o(!0),e([]);try{r("\uD83E\uDDEA Starting tests..."),r("1️⃣ Testing database initialization..."),await (0,s.initializeDatabase)(),r("✅ Database initialized successfully"),r("2️⃣ Testing transaction addition...");let t={date:new Date,amount:50,description:"Test transaction",category:"Alimentation",account:"Compte Principal",type:"expense",notes:"Test notes"},e=await (0,s.addTransaction)(t);r("✅ Transaction added with ID: ".concat(e)),r("3️⃣ Testing transaction retrieval...");let n=await s.db.transactions.toArray();r("✅ Retrieved ".concat(n.length," transactions")),r("4️⃣ Testing goal addition...");let a={name:"Test Goal",targetAmount:1e3,currentAmount:100,deadline:new Date(Date.now()+2592e6),description:"Test goal description",category:"Test",image:""},i=await (0,s.addGoal)(a);r("✅ Goal added with ID: ".concat(i)),r("5️⃣ Testing data export...");let o=await (0,s.exportData)();r("✅ Data exported successfully"),r("\uD83D\uDCCA Exported data contains:"),r("  - Transactions: ".concat(o.transactions.length)),r("  - Goals: ".concat(o.goals.length)),r("  - Categories: ".concat(o.categories.length)),r("  - Accounts: ".concat(o.accounts.length)),r("\n\uD83C\uDF89 All tests passed successfully!")}catch(t){r("❌ Test failed: ".concat(t)),console.error("Test error:",t)}finally{o(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"\uD83E\uDDEA Test de l'Application"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Cette page permet de tester les fonctionnalit\xe9s principales de l'application."}),(0,a.jsx)("button",{onClick:c,disabled:n,className:"px-6 py-3 bg-financial-600 hover:bg-financial-700 disabled:opacity-50 text-white rounded-lg transition-colors font-medium",children:n?"Tests en cours...":"Lancer les tests"})]}),t.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"R\xe9sultats des tests"}),(0,a.jsx)("div",{className:"space-y-2 font-mono text-sm",children:t.map((t,e)=>(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"›"}),(0,a.jsx)("span",{className:t.includes("❌")?"text-danger":t.includes("✅")?"text-success":"text-gray-700",children:t})]},e))})]}),(0,a.jsxs)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-medium text-blue-900 mb-2",children:"Informations de d\xe9bogage"}),(0,a.jsxs)("div",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsxs)("p",{children:["Navigateur: ","undefined"!=typeof navigator?navigator.userAgent:"Non disponible"]}),(0,a.jsxs)("p",{children:["IndexedDB support: ","indexedDB"in window?"✅ Disponible":"❌ Non disponible"]}),(0,a.jsxs)("p",{children:["LocalStorage support: ","localStorage"in window?"✅ Disponible":"❌ Non disponible"]})]})]})]})})}},10880:function(t,e,n){"use strict";n.d(e,{CP:function(){return d},M6:function(){return p},T8:function(){return y},addGoal:function(){return g},addTransaction:function(){return r},db:function(){return s},deleteTransaction:function(){return u},exportData:function(){return b},f1:function(){return c},getSettings:function(){return f},importData:function(){return x},initializeDatabase:function(){return o},updateGoal:function(){return m},updateSettings:function(){return D},updateTransaction:function(){return l}});var a=n(42179);class i extends a.ZP{constructor(){super("FinanceManager"),this.version(1).stores({transactions:"++id, date, amount, category, account, type",categories:"++id, name, type, parentId",goals:"++id, name, targetAmount, currentAmount, deadline",accounts:"++id, name, type, balance, currency, isActive",budgets:"++id, categoryId, amount, period, startDate",settings:"++id"})}}let s=new i;async function o(){try{if(!window.indexedDB){console.warn("IndexedDB not available in this environment");return}let t=await s.categories.count();0===t&&await s.categories.bulkAdd([{name:"Alimentation",color:"#10b981",icon:"\uD83C\uDF4E",type:"expense"},{name:"Transport",color:"#3b82f6",icon:"\uD83D\uDE97",type:"expense"},{name:"Logement",color:"#8b5cf6",icon:"\uD83C\uDFE0",type:"expense"},{name:"Sant\xe9",color:"#ef4444",icon:"\uD83C\uDFE5",type:"expense"},{name:"Loisirs",color:"#f59e0b",icon:"\uD83C\uDFAE",type:"expense"},{name:"Shopping",color:"#ec4899",icon:"\uD83D\uDECD️",type:"expense"},{name:"Restaurant",color:"#f97316",icon:"\uD83C\uDF7D️",type:"expense"},{name:"Services",color:"#6b7280",icon:"⚡",type:"expense"},{name:"Salaire",color:"#10b981",icon:"\uD83D\uDCB0",type:"income"},{name:"Investissement",color:"#6366f1",icon:"\uD83D\uDCC8",type:"income"},{name:"Cadeau",color:"#f59e0b",icon:"\uD83C\uDF81",type:"income"},{name:"Autre",color:"#6b7280",icon:"\uD83D\uDCDD",type:"both"}]);let e=await s.accounts.count();0===e&&await s.accounts.add({name:"Compte Principal",type:"checking",balance:0,currency:"EUR",color:"#3b82f6",isActive:!0});let n=await s.settings.count();0===n&&await s.settings.add({currency:"EUR",language:"fr",theme:"system",dateFormat:"dd/MM/yyyy",weekStartsOn:"monday",notifications:!0,autoBackup:!0}),console.log("Database initialized successfully")}catch(t){console.error("Error initializing database:",t),console.warn("Database initialization failed, app will run with limited functionality")}}async function r(t){return await s.transactions.add({...t,createdAt:new Date,updatedAt:new Date})}async function c(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return await s.transactions.orderBy("date").reverse().offset(e).limit(t).toArray()}async function l(t,e){return await s.transactions.update(t,{...e,updatedAt:new Date})}async function u(t){return await s.transactions.delete(t)}async function d(){return await s.categories.toArray()}async function p(){return await s.goals.toArray()}async function g(t){return await s.goals.add({...t,createdAt:new Date,updatedAt:new Date})}async function m(t,e){return await s.goals.update(t,{...e,updatedAt:new Date})}async function y(){return await s.accounts.toArray()}async function f(){return(await s.settings.toArray())[0]||null}async function D(t){let e=await f();if(null==e?void 0:e.id)return await s.settings.update(e.id,t)}async function b(){let[t,e,n,a,i,o]=await Promise.all([s.transactions.toArray(),s.categories.toArray(),s.goals.toArray(),s.accounts.toArray(),s.budgets.toArray(),s.settings.toArray()]);return{version:"1.0.0",exportedAt:new Date,transactions:t,categories:e,goals:n,accounts:a,budgets:i,settings:o[0]||null}}async function x(t){await Promise.all([s.transactions.clear(),s.categories.clear(),s.goals.clear(),s.accounts.clear(),s.budgets.clear(),s.settings.clear()]),await Promise.all([s.transactions.bulkAdd(t.transactions||[]),s.categories.bulkAdd(t.categories||[]),s.goals.bulkAdd(t.goals||[]),s.accounts.bulkAdd(t.accounts||[]),s.budgets.bulkAdd(t.budgets||[]),t.settings?s.settings.add(t.settings):Promise.resolve()])}}},function(t){t.O(0,[96,971,117,744],function(){return t(t.s=85953)}),_N_E=t.O()}]);